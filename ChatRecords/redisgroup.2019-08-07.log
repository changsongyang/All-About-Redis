2019-08-07 08:18:26,981  鹏程@CMBC 分享链接:
 #每日分享 「链接」 https://youtu.be/SyQTG0hXPxY
https://t.zsxq.com/VvjujuF
2019-08-07 08:19:19,426  鹏程@CMBC 说: 
推荐观赏
2019-08-07 08:49:15,002  鹏程@CMBC 说: 
难得作者比较完整的亲自出来讲expiration
2019-08-07 09:35:00,708  锦超@小红唇 分享链接:
 正式支持多线程！Redis 6.0与老版性能对比评测
http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653551383&amp;idx=1&amp;sn=dbb30be126970c4d442e9db5c443e1c2&amp;chksm=813a6a8fb64de39967c5f8e9c643563294741a7cb39c667127270feb4e812de0bb98ba2e871a&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1565111092938&amp;sharer_shareid=8b01ac96c57b14907d80bae07ad53307#rd
2019-08-07 10:02:30,620  肖贝贝@BIGO 说: 
看了下, 这个评测有几个问题没说清楚, 感觉影响实用性
2019-08-07 10:03:34,796  肖贝贝@BIGO 说: 
比如我们一个主机, 8核64G, 一开始是开6个实例, 每个实例8G在上面, 跑6个核
2019-08-07 10:04:22,882  肖贝贝@BIGO 说: 
假设每个核是5w qps, 那机器的总的qps是30w而且比较稳定
2019-08-07 10:05:04,878  肖贝贝@BIGO 说: 
开多线程以后, 是不是意味着单进程可以使用超过一个cpu, 那如果性能提升的代价和cpu的消耗比是多少
2019-08-07 10:06:11,604  肖贝贝@BIGO 说: 
如果这个比值接近1, 那这个特性只在cpu内存比比较大的情况下, 比如32核64G才会有比较好的场景使用
2019-08-07 10:06:27,655  肖贝贝@BIGO 说: 
否则开不开意义不大, 反而因为cpu不好控制, 影响稳定性
2019-08-07 10:07:45,165  陶陶@dtdream 说: 
多线程之后是不是意味着，多条语句一起执行不再是原子性了
2019-08-07 10:08:33,208  梁汝健@酷狗视频 说: 
编码复杂度增加了很多是吗？
2019-08-07 10:09:34,113  梁汝健@酷狗视频 说: 
面试的问题：为什么redis是单线程的？改为--->为什么redis要从单线程改为多线程？[捂脸]
2019-08-07 10:10:31,196  陶陶@dtdream 说: 
还在用4.x的版本...
2019-08-07 10:10:37,350  肖贝贝@BIGO 说: 
看了下这个分享, 处理过程还是单线程的
2019-08-07 10:10:40,073  许瑞@CRUG 说: 
redis的主业务功能并没有改为多线程啊
2019-08-07 10:10:40,364  Rui Gu@Redisson 说: 
仅仅是IO相关的变成多线程
2019-08-07 10:10:45,720  肖贝贝@BIGO 说: 
所以不破坏原子性
2019-08-07 10:11:46,465  梁汝健@酷狗视频 说: 
哦哦~
2019-08-07 10:21:08,249  鹏程@CMBC 说: 
面试正确答案：不破坏原子性下尽可能化简多线程带来的锁和context switch，另外event pool也不慢。 
2019-08-07 10:21:36,161  鹏程@CMBC 说: 
https://zhuanlan.zhihu.com/p/52600663 阿里P8架构师告诉你正确答案。。。也不知道是哪位P8。。
2019-08-07 10:22:00,345  梁汝健@酷狗视频 说: 
哈哈，谢谢大佬分享
2019-08-07 10:22:05,109  Ignacio@失业中 说: 
厉害了
2019-08-07 10:23:08,216  鹏程@CMBC 说: 
P8真应该写的别的。。
2019-08-07 10:26:05,054  Slogen@didi 说: 
写这种文章的肯定不是p8吧，只是为了吸引人来看罢了
2019-08-07 10:26:50,826  鹏程@CMBC 说: 
嗯
2019-08-07 10:26:58,998  Vinson 说: 
p8 写正常，随便写写而已
2019-08-07 10:27:08,916  刹那@中科软 说: 
这些培训机构  都打着P、T的旗号
2019-08-07 10:27:19,392  鹏程@CMBC 说: 
@Vinson 亲改个群名片~
2019-08-07 10:27:49,748  鹏程@CMBC 说: 
写的蛮好的，都挺对~话说Redis 6.0的proxy代码作者是不是还没放出来？
2019-08-07 10:28:20,684  Slogen@didi 说: 
之前看过一个阿里P9写的一篇文章，从IDEA的使用联想到软件开发以及心流，也是牛逼
2019-08-07 10:28:40,611  白馨@陌陌 说: 
这文章话说p5也能写出来
2019-08-07 10:31:20,184  鹏程@CMBC 说: 
对不起我跑题了，随口感慨一句。。估计也就是标题党。。Redis 6.x的proxy还是很期待的
2019-08-07 10:33:03,710  Mitol@stream 说: 
redis 多线程，我有一个疑问不知道是否正确。

批量读和批量写，个人感觉是有前提的。例如在某瞬间来了一堆请求如下：

读写读写读写读写读写读写读写读写；左到右为请求先后顺序，那么这个就和单进程的时候是一样的。

读读读写写写读读写读写读写读写；这种的话应该才会有比较好的性能提升，有一点抠极限的感觉，在这点的优化上不知道是不是有人做过极端的测试，全是第一种情况的时候会不会比以前的那种处理下降？
2019-08-07 10:36:19,189  Mitol@stream 说: 
还是说redis 没有类似的处理，全是单纯的 取 “读”批量处理，取“写”批量处理？
2019-08-07 10:41:15,269  Rui Gu@Redisson 说: 
批量是发送指令的方式，不是处理的方式。
2019-08-07 10:43:55,135  Mitol@stream 说: 
嗯。感谢大佬的提醒

我觉得我还是需要先去对比一下实现区别再来看，只是刚才看了大家的聊天然后想到的问题。
2019-08-07 10:52:36,156  鹏程@CMBC 说: 
交流使人进步
2019-08-07 12:30:17,024  鹏程@CMBC 说: 
@白宸@阿里云 confirm
2019-08-07 12:53:33,684  天行 说: 
http://alibaba.tupu360.com/position/detail?pid=542773&bs=yes&pCode=JPC4cdHhMfRaIKSLbBgysg%3D%3D&shp=51fee96e36017b890934596a40574d43c57ee874ccc4f32c5c472e74b14c1b12fd48962f84d0bcc100cd726c
阿里云数据库招聘 自荐或者推荐均可，请发简历给我，熟悉 redis和mongo内核优先  ，入职成功送P30 pro 
2019-08-07 12:53:53,474  天行 说: 
[抱拳][抱拳]
2019-08-07 12:54:40,297  白馨@陌陌 说: 
Redis 3.2才增加了keepalive机制  在之前的版本 大家遇到半连接 未清理的情况多吗
2019-08-07 12:54:45,242  白馨@陌陌 说: 
Remember that keepalive support, even if configured in the kernel, is not the default behavior in Linux. Programs must request keepalive control for their sockets using the setsockopt interface.
2019-08-07 12:54:51,582  白馨@陌陌 说: 
https://www.tldp.org/HOWTO/text/TCP-Keepalive-HOWTO
2019-08-07 12:55:48,038  白馨@陌陌 说: 
keepalive 我理解是必须在程序里开启，才会生效
2019-08-07 13:22:48,250  黄威@国美 说: 
@白馨@陌陌 是的，必须调用setsockopt这个系统调用接口设置才会生效
2019-08-07 13:26:15,646  黄威@国美 说: 
redis中在anet.c
2019-08-07 13:27:33,517  黄威@国美 说: 
新建客户端时，会调用anetKeepAlive这个函数设置
2019-08-07 15:30:05,430  harry@同程旅游 说: 
SET resource_name my_random_value NX PX 30000
2019-08-07 15:30:24,881  harry@同程旅游 说: 
这个指令，java  的几个客户端都没有找到实现
2019-08-07 15:30:37,990  harry@同程旅游 说: 
只有redisson有tryset 方法，实现了
2019-08-07 15:31:09,748  harry@同程旅游 说: 
包括 spring redistemplate 也没有，各位请教下，这个为什么客户端没有实现 呢
